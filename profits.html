<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Ø­Ø³Ø§Ø¨ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ â€” Rasha Adel</title>
  <link rel="stylesheet" href="style.css">
  <style>
    body {
      background: url('background.jpg') center/cover fixed;
      font-family: 'Cairo', sans-serif;
    }

    .profit-box {
      background: rgba(255,255,255,0.93);
      padding: 25px;
      border-radius: 12px;
      text-align: center;
      margin-top: 30px;
      max-width: 420px;
      margin-left: auto;
      margin-right: auto;
      box-shadow: 0 4px 10px rgba(0,0,0,0.15);
    }

    .profit-box h3 { margin-bottom: 10px; color: #333; }
    input[type=number] {
      font-size: 1rem;
      padding: 8px;
      width: 65%;
      margin-bottom: 12px;
      border-radius: 6px;
      border: 1px solid #ccc;
      outline: none;
      text-align: center;
      transition: 0.3s;
    }
    input[type=number]:focus {
      border-color: #007bff;
      box-shadow: 0 0 5px rgba(0,123,255,0.4);
    }
    button.btn-primary {
      cursor: pointer;
      padding: 10px 25px;
      font-size: 1rem;
      border: none;
      border-radius: 8px;
      background-color: #007bff;
      color: white;
      transition: background-color 0.3s ease;
    }
    button.btn-primary:hover { background-color: #0056b3; }

    #totalIncomeDay, #netProfitDay, #totalIncomeMonth, #netProfitMonth {
      font-weight: bold;
      color: #28a745;
      font-size: 1.2rem;
      margin-bottom: 10px;
    }

    .footer-line { margin-top: 40px; text-align: center; font-size: 0.9rem; color: #555; }
    h2 { text-align: center; margin-top: 20px; color: #222; }
    .section { margin-bottom: 30px; }
  </style>
</head>
<body>
  
  <aside class="sidebar">
    <div class="brand">
      <img src="logo11.jpg" alt="Rasha Adel">
      <h1>Rasha Adel</h1>
      <p class="sub">Beauty Centre & Spa</p>
    </div>
    <nav class="nav">
      <a class="nav-item" href="dashboard_admin.html">Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¯ÙŠØ±</a>
      <a class="nav-item" href="clients.html">Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</a>
      <a class="nav-item" href="invoice_admin.html">Ø§Ù„ÙÙˆØ§ØªÙŠØ±</a>
      <a class="nav-item" href="invoice_log.html">Ø³Ø¬Ù„ Ø§Ù„ÙÙˆØ§ØªÙŠØ±</a>
      <a class="nav-item" href="services.html">Ø§Ù„Ø®Ø¯Ù…Ø§Øª</a>
      <a class="nav-item" href="profits.html">Ø­Ø³Ø§Ø¨ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­</a>
      <a class="nav-item" href="register_customer_admin.html">ØªØ³Ø¬ÙŠÙ„ Ø¹Ù…ÙŠÙ„</a>
      <a class="nav-item" href="index.html">ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</a>
    </nav>
  </aside>

  <main class="main">
    <div class="container">
      <h2>ğŸ’° Ø­Ø³Ø§Ø¨ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­</h2>

      <div class="profit-box section">
        <h3>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¯Ø®Ù„ Ø§Ù„ÙŠÙˆÙ…ÙŠ:</h3>
        <p id="totalIncomeDay">0 Ø¬</p>
        <h3>Ù…ØµØ±ÙˆÙØ§Øª Ø§Ù„ÙŠÙˆÙ…:</h3>
        <input id="expensesDay" type="number" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª (Ø¬)">
        <br>
        <button class="btn btn-primary" onclick="calcProfit('day')">Ø§Ø­Ø³Ø¨ ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­ Ø§Ù„ÙŠÙˆÙ…ÙŠ</button>
        <h3>ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­ Ø§Ù„ÙŠÙˆÙ…ÙŠ:</h3>
        <p id="netProfitDay">0 Ø¬</p>
      </div>

      <div class="profit-box section">
        <h3>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¯Ø®Ù„ Ø§Ù„Ø´Ù‡Ø±ÙŠ:</h3>
        <p id="totalIncomeMonth">0 Ø¬</p>
        <h3>Ù…ØµØ±ÙˆÙØ§Øª Ø§Ù„Ø´Ù‡Ø±:</h3>
        <input id="expensesMonth" type="number" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª (Ø¬)">
        <br>
        <button class="btn btn-primary" onclick="calcProfit('month')">Ø§Ø­Ø³Ø¨ ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­ Ø§Ù„Ø´Ù‡Ø±ÙŠ</button>
        <h3>ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­ Ø§Ù„Ø´Ù‡Ø±ÙŠ:</h3>
        <p id="netProfitMonth">0 Ø¬</p>
      </div>

      <div class="footer-line">
        Â© 2025 Rasha Adel Beauty Center & Spa â€” Designed & Developed by Mohamed Ali
      </div>
    </div>
  </main>

  <script src="app.js"></script>
  <script>
    // Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¯Ø®Ù„ Ø§Ù„ÙŠÙˆÙ…ÙŠ
    function getTotalIncomeDay() {
      const invoices = window.app?.getTodayInvoices?.() || [];
      return invoices.reduce((sum, inv) => sum + (parseFloat(inv.final) || 0), 0);
    }

    // Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¯Ø®Ù„ Ø§Ù„Ø´Ù‡Ø±ÙŠ
    function getTotalIncomeMonth() {
      const invoices = window.app?.getMonthlyInvoices?.() || [];
      return invoices.reduce((sum, inv) => sum + (parseFloat(inv.final) || 0), 0);
    }

    // Ø­Ø³Ø§Ø¨ ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­
    function calcProfit(period) {
      let income, expenses, netId;
      if (period === 'day') {
        income = getTotalIncomeDay();
        expenses = parseFloat(document.getElementById('expensesDay').value) || 0;
        netId = 'netProfitDay';
      } else if (period === 'month') {
        income = getTotalIncomeMonth();
        expenses = parseFloat(document.getElementById('expensesMonth').value) || 0;
        netId = 'netProfitMonth';
      }
      const profit = income - expenses;
      document.getElementById(netId).innerText = profit.toFixed(2) + ' Ø¬';
    }

    function updateIncomeDisplay() {
      document.getElementById('totalIncomeDay').innerText = getTotalIncomeDay().toFixed(2) + ' Ø¬';
      document.getElementById('totalIncomeMonth').innerText = getTotalIncomeMonth().toFixed(2) + ' Ø¬';

      // Ø¥Ø°Ø§ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª Ù…ÙƒØªÙˆØ¨Ø©ØŒ Ø§Ø­Ø³Ø¨ Ø§Ù„Ø±Ø¨Ø­ ÙÙˆØ±Ù‹Ø§
      if (parseFloat(document.getElementById('expensesDay').value) > 0) calcProfit('day');
      if (parseFloat(document.getElementById('expensesMonth').value) > 0) calcProfit('month');
    }

    document.addEventListener('DOMContentLoaded', () => {
      updateIncomeDisplay();
      setInterval(updateIncomeDisplay, 60000); // ØªØ­Ø¯ÙŠØ« ØªÙ„Ù‚Ø§Ø¦ÙŠ ÙƒÙ„ Ø¯Ù‚ÙŠÙ‚Ø©
    });
  </script>
</body>
</html>
